\hypertarget{go__to__point_8py}{}\doxysection{scripts/go\+\_\+to\+\_\+point.py File Reference}
\label{go__to__point_8py}\index{scripts/go\_to\_point.py@{scripts/go\_to\_point.py}}


Node implementing the go\+\_\+to\+\_\+point behavior.  


\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{go__to__point_8py_a73dbc2c93a6c9bb25f136c4519b8b6ca}{go\+\_\+to\+\_\+point.\+srv\+\_\+set\+\_\+vel}} (req)
\begin{DoxyCompactList}\small\item\em /set\+\_\+vel server Retrieve maximum linear and angular speed from the Set\+Vel message. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_a36304a9f313b0579f7fc69fa01695524}{go\+\_\+to\+\_\+point.\+clbk\+\_\+odom}} (msg)
\begin{DoxyCompactList}\small\item\em Odometry callback Retrieve (x,y,theta) from the Odom message. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_a31ee48e5cae36821049b572a96b7c8be}{go\+\_\+to\+\_\+point.\+change\+\_\+state}} (\mbox{\hyperlink{state__machine_8cpp_a89f234133d3efe315836311cbf21c64b}{state}})
\begin{DoxyCompactList}\small\item\em Update the current global state. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_ac688bb56fa84763ea2edefc30cae032a}{go\+\_\+to\+\_\+point.\+normalize\+\_\+angle}} (angle)
\begin{DoxyCompactList}\small\item\em Renormalize an angle berween \mbox{[}-\/pi, pi\mbox{]}. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_aa2f5974f6134483d69194c980a3a0799}{go\+\_\+to\+\_\+point.\+fix\+\_\+yaw}} (des\+\_\+yaw, next\+\_\+state)
\begin{DoxyCompactList}\small\item\em Orient the robot in a desired way The function is used either to orient the robot toward the goal (x,y) position or, once it\textquotesingle{}s reached, to achieve the goal orientation. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_ac8579665c0fbf665f734476554fac37d}{go\+\_\+to\+\_\+point.\+go\+\_\+straight\+\_\+ahead}} (des\+\_\+pos)
\begin{DoxyCompactList}\small\item\em Drive toward the goal Set the linear and angular speed depending on the distance to the goal pose. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_ac2587220a4ac9c845bc9c5b0b45d5835}\label{go__to__point_8py_ac2587220a4ac9c845bc9c5b0b45d5835}} 
def \mbox{\hyperlink{go__to__point_8py_ac2587220a4ac9c845bc9c5b0b45d5835}{go\+\_\+to\+\_\+point.\+done}} ()
\begin{DoxyCompactList}\small\item\em Stop the robot Set the robot linear and angular velocity to 0. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_a2203d17b7e563bee20ed4c988548df45}{go\+\_\+to\+\_\+point.\+go\+\_\+to\+\_\+point}} (goal)
\begin{DoxyCompactList}\small\item\em State machine implementation Set an appropriate behaviour depending on the current robot state, in orderd to reach the goal. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_ab92bd6db1ec323a4d795ed6cb40aebe1}\label{go__to__point_8py_ab92bd6db1ec323a4d795ed6cb40aebe1}} 
def {\bfseries go\+\_\+to\+\_\+point.\+main} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{go__to__point_8py_a91dbaab25e6080f6b5dbf82cac6ce75c}\label{go__to__point_8py_a91dbaab25e6080f6b5dbf82cac6ce75c}} 
{\bfseries go\+\_\+to\+\_\+point.\+position\+\_\+} = Point()
\item 
\mbox{\Hypertarget{go__to__point_8py_ae444f19eb2019982432760ace036ce03}\label{go__to__point_8py_ae444f19eb2019982432760ace036ce03}} 
int {\bfseries go\+\_\+to\+\_\+point.\+yaw\+\_\+} = 0
\item 
\mbox{\Hypertarget{go__to__point_8py_aa2d0ef255bcf5d5faf9ca2764730fb17}\label{go__to__point_8py_aa2d0ef255bcf5d5faf9ca2764730fb17}} 
int {\bfseries go\+\_\+to\+\_\+point.\+state\+\_\+} = 0
\item 
\mbox{\Hypertarget{go__to__point_8py_a57b4090d0abcbcf0bfa2bcb9329d3036}\label{go__to__point_8py_a57b4090d0abcbcf0bfa2bcb9329d3036}} 
\mbox{\hyperlink{go__to__point_8py_a57b4090d0abcbcf0bfa2bcb9329d3036}{go\+\_\+to\+\_\+point.\+pub\+\_\+}} = None
\begin{DoxyCompactList}\small\item\em publisher \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a64583fad586a7212c40613ec1c3e7c69}\label{go__to__point_8py_a64583fad586a7212c40613ec1c3e7c69}} 
\mbox{\hyperlink{go__to__point_8py_a64583fad586a7212c40613ec1c3e7c69}{go\+\_\+to\+\_\+point.\+act\+\_\+s}} = None
\begin{DoxyCompactList}\small\item\em action\+\_\+server \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a354fba5ca969f353a94d6131040611b9}\label{go__to__point_8py_a354fba5ca969f353a94d6131040611b9}} 
\mbox{\hyperlink{go__to__point_8py_a354fba5ca969f353a94d6131040611b9}{go\+\_\+to\+\_\+point.\+vel\+\_\+s}} = None
\begin{DoxyCompactList}\small\item\em velocity server \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a67f95834f0959feb3facd17bc7fa2b38}\label{go__to__point_8py_a67f95834f0959feb3facd17bc7fa2b38}} 
int {\bfseries go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+} = math.\+pi / 9
\item 
\mbox{\Hypertarget{go__to__point_8py_af74ccf49164d0478ca8343e2031d5813}\label{go__to__point_8py_af74ccf49164d0478ca8343e2031d5813}} 
int {\bfseries go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+2\+\_\+} = math.\+pi / 90
\item 
\mbox{\Hypertarget{go__to__point_8py_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}\label{go__to__point_8py_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}} 
float {\bfseries go\+\_\+to\+\_\+point.\+dist\+\_\+precision\+\_\+} = 0.\+1
\item 
\mbox{\Hypertarget{go__to__point_8py_a524106fc7667a0927951dfd89d52d6a7}\label{go__to__point_8py_a524106fc7667a0927951dfd89d52d6a7}} 
float {\bfseries go\+\_\+to\+\_\+point.\+kp\+\_\+a} = -\/3.\+0
\item 
\mbox{\Hypertarget{go__to__point_8py_a7bc498652ca66932e704e738b50c297b}\label{go__to__point_8py_a7bc498652ca66932e704e738b50c297b}} 
float {\bfseries go\+\_\+to\+\_\+point.\+kp\+\_\+d} = 0.\+2
\item 
\mbox{\Hypertarget{go__to__point_8py_acb4e14986fafe5cb73bb8ad0c178869d}\label{go__to__point_8py_acb4e14986fafe5cb73bb8ad0c178869d}} 
float \mbox{\hyperlink{go__to__point_8py_acb4e14986fafe5cb73bb8ad0c178869d}{go\+\_\+to\+\_\+point.\+ub\+\_\+a}} = 0.\+6
\begin{DoxyCompactList}\small\item\em Maximum angular speed. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a16c473b9e717200c483d18e66b48152a}\label{go__to__point_8py_a16c473b9e717200c483d18e66b48152a}} 
float \mbox{\hyperlink{go__to__point_8py_a16c473b9e717200c483d18e66b48152a}{go\+\_\+to\+\_\+point.\+ub\+\_\+d}} = 0.\+6
\begin{DoxyCompactList}\small\item\em Maximum linear speed. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Node implementing the go\+\_\+to\+\_\+point behavior. 

\begin{DoxyAuthor}{Author}
Koushikmani Maskalmatti Lakshman (S5053566) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+2 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
06/03/2022
\end{DoxyDate}
Publishes to\+:~\newline
 /cmd\+\_\+vel (geometry\+\_\+msgs.\+msg.\+Twist)

Service\+Server\+:~\newline
 /set\+\_\+vel (rt2\+\_\+assignment1.\+srv.\+Set\+Vel)

Action\+Server\+:~\newline
 /go\+\_\+to\+\_\+point (rt2\+\_\+assignment1.\+action.\+Pose\+Action)

Description\+:

This node controls the go\+\_\+topoint behavior of the non-\/holonomic robot via an action server. A F\+SM is used to model the behavior whenever a new goal pose is received\+: ~\newline



\begin{DoxyEnumerate}
\item align with the goal position ~\newline

\item go straight to the goal position ~\newline

\item align with the goal orientation ~\newline

\item goal posoe reached ~\newline

\end{DoxyEnumerate}

The max values for both linear and angular speed are updated each time a request for the /set\+\_\+vel serrvice is received. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{go__to__point_8py_a31ee48e5cae36821049b572a96b7c8be}\label{go__to__point_8py_a31ee48e5cae36821049b572a96b7c8be}} 
\index{go\_to\_point.py@{go\_to\_point.py}!change\_state@{change\_state}}
\index{change\_state@{change\_state}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{change\_state()}{change\_state()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+change\+\_\+state (\begin{DoxyParamCaption}\item[{}]{state }\end{DoxyParamCaption})}



Update the current global state. 


\begin{DoxyParams}{Parameters}
{\em state} & (int)\+: new state \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{go__to__point_8py_a36304a9f313b0579f7fc69fa01695524}\label{go__to__point_8py_a36304a9f313b0579f7fc69fa01695524}} 
\index{go\_to\_point.py@{go\_to\_point.py}!clbk\_odom@{clbk\_odom}}
\index{clbk\_odom@{clbk\_odom}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{clbk\_odom()}{clbk\_odom()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+clbk\+\_\+odom (\begin{DoxyParamCaption}\item[{}]{msg }\end{DoxyParamCaption})}



Odometry callback Retrieve (x,y,theta) from the Odom message. 


\begin{DoxyParams}{Parameters}
{\em msg} & (Odometry)\+: odometry message. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{go__to__point_8py_aa2f5974f6134483d69194c980a3a0799}\label{go__to__point_8py_aa2f5974f6134483d69194c980a3a0799}} 
\index{go\_to\_point.py@{go\_to\_point.py}!fix\_yaw@{fix\_yaw}}
\index{fix\_yaw@{fix\_yaw}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{fix\_yaw()}{fix\_yaw()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+fix\+\_\+yaw (\begin{DoxyParamCaption}\item[{}]{des\+\_\+yaw,  }\item[{}]{next\+\_\+state }\end{DoxyParamCaption})}



Orient the robot in a desired way The function is used either to orient the robot toward the goal (x,y) position or, once it\textquotesingle{}s reached, to achieve the goal orientation. 

It also changes to a new state, depending on the current one (either initial heading or final orientation). 
\begin{DoxyParams}{Parameters}
{\em des\+\_\+yaw} & (float)\+: desired yaw \\
\hline
{\em next\+\_\+state} & (int)\+: next state to set \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{go__to__point_8py_ac8579665c0fbf665f734476554fac37d}\label{go__to__point_8py_ac8579665c0fbf665f734476554fac37d}} 
\index{go\_to\_point.py@{go\_to\_point.py}!go\_straight\_ahead@{go\_straight\_ahead}}
\index{go\_straight\_ahead@{go\_straight\_ahead}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{go\_straight\_ahead()}{go\_straight\_ahead()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+go\+\_\+straight\+\_\+ahead (\begin{DoxyParamCaption}\item[{}]{des\+\_\+pos }\end{DoxyParamCaption})}



Drive toward the goal Set the linear and angular speed depending on the distance to the goal pose. 


\begin{DoxyParams}{Parameters}
{\em des\+\_\+pos} & (Point)\+: desired (x, y) position \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{go__to__point_8py_a2203d17b7e563bee20ed4c988548df45}\label{go__to__point_8py_a2203d17b7e563bee20ed4c988548df45}} 
\index{go\_to\_point.py@{go\_to\_point.py}!go\_to\_point@{go\_to\_point}}
\index{go\_to\_point@{go\_to\_point}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{go\_to\_point()}{go\_to\_point()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+go\+\_\+to\+\_\+point (\begin{DoxyParamCaption}\item[{}]{goal }\end{DoxyParamCaption})}



State machine implementation Set an appropriate behaviour depending on the current robot state, in orderd to reach the goal. 

The state machine keeps running until the goal is reached or the action is preempted (the goal gets cancelled). 
\begin{DoxyParams}{Parameters}
{\em goal} & (Pose\+Action\+Goal)\+: (x,y,theta) goal pose \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{go__to__point_8py_ac688bb56fa84763ea2edefc30cae032a}\label{go__to__point_8py_ac688bb56fa84763ea2edefc30cae032a}} 
\index{go\_to\_point.py@{go\_to\_point.py}!normalize\_angle@{normalize\_angle}}
\index{normalize\_angle@{normalize\_angle}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{normalize\_angle()}{normalize\_angle()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+normalize\+\_\+angle (\begin{DoxyParamCaption}\item[{}]{angle }\end{DoxyParamCaption})}



Renormalize an angle berween \mbox{[}-\/pi, pi\mbox{]}. 


\begin{DoxyParams}{Parameters}
{\em angle} & (float)\+: input angle\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em angle} & (float)\+: normalized angle \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{go__to__point_8py_a73dbc2c93a6c9bb25f136c4519b8b6ca}\label{go__to__point_8py_a73dbc2c93a6c9bb25f136c4519b8b6ca}} 
\index{go\_to\_point.py@{go\_to\_point.py}!srv\_set\_vel@{srv\_set\_vel}}
\index{srv\_set\_vel@{srv\_set\_vel}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{srv\_set\_vel()}{srv\_set\_vel()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+srv\+\_\+set\+\_\+vel (\begin{DoxyParamCaption}\item[{}]{req }\end{DoxyParamCaption})}



/set\+\_\+vel server Retrieve maximum linear and angular speed from the Set\+Vel message. 


\begin{DoxyParams}{Parameters}
{\em req} & (Set\+Vel)\+: set\+\_\+vel request. \\
\hline
\end{DoxyParams}
